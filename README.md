# ゲームタイトル
#呪われし孤島、黄泉ヶ島（よみがじま）

# コンセプト
- プレイヤーは、古くから神隠しや怪奇現象の噂が絶えない絶海の孤島「黄泉ヶ島」を探索する。
- 行方不明になった友人の捜索、あるいは禁断の秘宝探しなど、様々な理由で足を踏み入れる。
- 島そのものが生きているかのようにプレイヤーの行動に反応し、絶望的な状況へと追い込んでいく。

# 使用するゲーム開発エンジン
Unity

# 特徴
- **動的なシナリオ生成**: プレイヤーの行動、発言、現在の環境に応じて、AIがその場で状況描写やイベントなどを生成
- **恐怖演出**: 時間帯、天候、プレイヤーのSAN値に応じて、AIが島の風景や音響、発生する怪奇現象を生成・変化させる。
- **謎解き要素**: 島の各所に散りばめられた謎や呪いを解くための手がかりを、AIがプレイヤーの探索状況に応じて提示したり、あるいは新たな謎を生成したりする。プレイヤーの思考を読み取り、適切な難易度でヒントを提供する。

# プレイヤーの情報
- `SAN_Value`: プレイヤーの精神状態。GUIのスライダーなどで視覚的に表現。AIに渡す際には数値として渡す。
- `Inventory`: 所持アイテムのリスト。AIに渡す際にはアイテム名をリストとして渡す。
- `Current_Location`: 現在の場所。AIに渡す。
- `Flags`: ゲームの進行状況を示すブーリアン（真偽値）や文字列のフラグ。例: `日記A_読了 = true`, `発電機_修理済み = true`。AIに渡すことで、過去の出来事を考慮した生成を促す。

# AIとゲームロジックの連携
- クラウドベースのGoogle Gemini APIを、AIとしてAPI利用
- 行動判定にはダイス(乱数)を用いる
- AIからの応答は、パース処理によって、プレイヤーへ表示する文章と、関数呼び出し(または表示画像など)を分離

## AIへのプロンプト
- 役割の定義
- 応答形式の定義
- ゲームルール
- シナリオ
- マップ
- これまでの行動履歴の要約(AIからの応答で受け取ったもの)
- 現在のプレイヤーの状態
- プレイヤーの入力

## AIからの応答
- プレイヤーに表示する文章(情景描写やNPCの発言など)
- 関数・アセットの呼び出し
- これまでの行動履歴の要約

# ゲームの流れの一例
1.  **プレイヤーの行動宣言**: プレイヤーが自由入力で「廃れた小屋の中を詳しく調べる」と入力。
2.  **AIの応答（サイコロ要求）**:
    * AI: 「小屋の中は暗く、ガラクタが散乱している。何か見つけ出すには、注意深く探索する必要があるだろう。**サイコロ要求: 知覚判定**のために1d6を振ってください。」
    * Unityアプリ側：サイコロを振るボタンが表示される。プレイヤー入力は無効化。
3.  **プレイヤーのサイコロロール**: プレイヤーがボタンをタップし、サイコロが振られる（例：出目「4」）。
4.  **結果のAIへの送信**: Unityが「知覚判定のためのサイコロで4が出た」という情報を付加してAIにプロンプトを送信。
5.  **AIの応答（結果の描写）**:
    * AI: 「サイコロの出目4は、あなたの知覚力を考慮すると十分な結果だ。あなたは埃まみれの棚の奥に、古びた日記帳が隠されているのを見つけた。しかし、日記の裏には不気味な血痕がついており、あなたの**SAN値が-3減少**した。」
    * Unityアプリ側：日記の画像を表示、SAN値を3減少させる、プレイヤー入力が再有効化される。

# アセット
- 大量の画像素材を用意しておき、AIが適切な画像を選び、表示させる
- **背景画像:** 島の様々な場所（桟橋、廃村、森、洞窟、神社、海岸、灯台など）の不気味な雰囲気の画像。
- **効果音:** 足音、風の音、波の音、不気味な物音、囁き声、悲鳴、心臓の鼓動など。AIが描写した内容に合わせて自動再生する仕組みを検討。
- **BGM:** 環境音のような静かで不穏なBGM。SAN値の変動に合わせて曲調を変えることも可能。

# マップ
- マップは事前に決定しておき、プロンプトとしてAIに渡す
